---
title: 库开发过程中遇到的坑
author: yrobot
keywords: 库,repo,npm,开发,node
createTime: 2022年10月20日
updateTime: 2022年10月20日
---

## WebPack (Next.js) 动态引入 报错 Cannot find module

npm:`ts-project-demo`

```ts
const CONFIG_PATH = "ts-demo.js";
const config = require(CONFIG_PATH);
export default config;
```

project:
`ts-demo.js`:

```js
export default {
  name: "yrobot",
};
```

`/index.ts`:

```ts
import config from "ts-project-demo";
```

结果：

```bash
error - Error: Cannot find module '/$path_to_project/ts-demo.js'
```

### 原因

- webpack 对于变量动态引入 不支持

参看[Error: Cannot find module with dynamic import](https://github.com/webpack/webpack/issues/6680#issuecomment-370798365)

### 方案

- 不要用变量作为 path

```ts
const config = require("ts-demo.js");
```

- path 前后加上字符串
  - [https://github.com/webpack/webpack/issues/6680#issuecomment-370800037](https://github.com/webpack/webpack/issues/6680#issuecomment-370800037)

```ts
import("./locales/" + locale + ".js");
```
