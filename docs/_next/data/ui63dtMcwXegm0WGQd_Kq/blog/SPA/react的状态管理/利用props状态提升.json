{"pageProps":{"pre":{"path":"_blogs/SPA/react的状态管理/利用context注入.md","url":"/blog/SPA/react的状态管理/利用context注入","title":"react的状态管理—利用context注入","author":"yrobot","keywords":"context,状态管理,react,注入,利用","createTime":1537545600000,"length":3383,"content":"<p><strong>本页目录：</strong><br><a href=\"#index\">场景思考</a><br><a href=\"#context\">利用context注入</a><br><a href=\"#result\">查看效果</a><br><a href=\"#code\">查看代码</a>  </p>\n<p><a id='index'></a></p>\n<h2 id=\"场景思考\">场景思考</h2>\n<p>现在我们用react去写一篇博客<br>博客包含 <code>标题</code> 和 <code>内容</code><br>而我期望<code>标题</code>和<code>内容</code>的颜色可以一键修改  </p>\n<p>当然最暴力的实现方式就是利用dom操作去被动的修改<br>但是有没有更优雅更可控的方式呢？  </p>\n<p>首先来看看项目的组件树：<br><img src=\"https://ws1.sinaimg.cn/large/006tNbRwgy1fvekxo7hlhj30c00aj0sy.jpg\" alt=\"\"></p>\n<p>那么有什么好的优雅的方式使<code>Title</code>和<code>Content</code>的颜色保持一致呢？<br>换句话说，怎么更好的管理<code>Title</code>和<code>Content</code>的状态呢？ </p>\n<h4 id=\"回顾上一节\">回顾上一节</h4>\n<p>上一节我们使用最基础的<a href=\"../%E5%88%A9%E7%94%A8props%E7%8A%B6%E6%80%81%E6%8F%90%E5%8D%87\">props状态提升</a>的方法<br>但当组件链很长的时候，新增一个状态就必须修改每个组件的props<br>那有没有跟直接的方法，搞一个共享状态，每个组件可以自由访问呢<br>react自带的context就是用来实现这一点的  </p>\n<p><a id='context'></a></p>\n<h2 id=\"利用context注入\">利用context注入</h2>\n<p>react的context可以代替props的传递工作  </p>\n<p><strong>context的作用：</strong> 将顶部\b组件的状态和方法与子组件共享  </p>\n<p><strong>context的使用方法：</strong>  </p>\n<ol>\n<li>利用<code>React.createContext()</code>生成一对<code>{Provider,Consumer}</code>  </li>\n<li>用生成的<code>Provider</code>包裹\b顶部组件，利用他props的value字段传入共享状态与方法  <pre><code><span class=\"xml\"> <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Provider</span> <span class=\"hljs-attr\">value</span>=</span></span><span class=\"hljs-template-variable\">{{<span class=\"hljs-name\">状态和方法</span>}}</span><span class=\"xml\"><span class=\"hljs-tag\">&gt;</span>\n     &lt;顶层组件&gt;\n <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Provider</span>&gt;</span></span>\n</code></pre>\n</li>\n<li>用生成的<code>Consumer</code>包裹使用共享状态的组件，在Consumer内子组件外用函数传入共享的状态  <pre><code> <span class=\"hljs-attribute\">&lt;Consumer&gt;</span>\n     {value =&gt; (\n         <span class=\"hljs-attribute\">&lt;子组件 使用value&gt;</span>\n     )}\n <span class=\"hljs-attribute\">&lt;/Consumer&gt;</span>\n</code></pre>\n</li>\n<li>保证状态位于顶层组件的<code>state</code>中，而共享的方法要更新状态也是利用<code>setState</code>，这样UI层才会刷新  </li>\n</ol>\n<p><img src=\"https://ws4.sinaimg.cn/large/006tNbRwgy1fvhm1xim52j30yg0pqads.jpg\" alt=\"\"></p>\n<p><strong>context的优势：</strong> </p>\n<ol>\n<li>只需要在顶层组件和用到状态的子组件进行操作，省去了props状态提升中对中间组件的数据传递操作。代码更清晰。   </li>\n<li>无需引入第三方状态管理，学习成本也相对较低  </li>\n</ol>\n<p><strong>尽管context相对于props状态提升方便很多，\b但是react官网还是 <em>不建议</em> 使用context，因为context的API是实验性的，在未来的react版本中会被修改。</strong>  </p>\n<p><strong>在简单场景,推荐使用props状态提升</strong><br><strong>在较复杂的场景，应该考虑引入第三方状态管理(如Redux、Mobx)</strong>  </p>\n<p><a id='result'></a></p>\n<h2 id=\"查看效果\">查看效果</h2>\n<ol>\n<li><img src=\"https://ws3.sinaimg.cn/large/006tNbRwgy1fvhmmoieh4j31kw0nxdpk.jpg\" alt=\"\"></li>\n<li><img src=\"https://ws2.sinaimg.cn/large/006tNbRwgy1fvhmmukgfyj31kw0o2qcy.jpg\" alt=\"\"></li>\n</ol>\n<p><a id='code'></a></p>\n<h2 id=\"查看代码\">查看代码</h2>\n<p>mainColorContext.js暴露React.createContext：  </p>\n<pre><code><span class=\"hljs-keyword\">import</span> React <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;react&#x27;</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> mainColorContext = React.createContext(\n    {\n        <span class=\"hljs-attr\">mainColor</span>:<span class=\"hljs-string\">&#x27;black&#x27;</span>\n    } <span class=\"hljs-comment\">// 默认值</span>\n);\n</code></pre>\n<p>BlogPage.js中引入mainColorContext，定义全局状态mainColor和方法changeMainColor()并传入Provider： </p>\n<pre><code><span class=\"hljs-keyword\">import</span> {mainColorContext} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;./mainColorContext.js&#x27;</span>\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">BlogPage</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Component</span> </span>{\n    <span class=\"hljs-function\"><span class=\"hljs-title\">constructor</span>(<span class=\"hljs-params\">props</span>)</span> {\n        <span class=\"hljs-built_in\">super</span>(props);\n        <span class=\"hljs-built_in\">this</span>.state = {\n            <span class=\"hljs-attr\">mainColor</span>: <span class=\"hljs-string\">&#x27;black&#x27;</span>\n        }\n    }\n    changeMainColor = <span class=\"hljs-function\">(<span class=\"hljs-params\">color</span>) =&gt;</span> {\n        <span class=\"hljs-built_in\">this</span>.setState({ <span class=\"hljs-comment\">//this的绑定//运行时//但是箭头函数没有this//直接沿着作用域链往上找找到BlogPage类的this //换成function就不行了，obj.func()会修改this指向为obj</span>\n            <span class=\"hljs-attr\">mainColor</span>: color\n        })\n    }\n    <span class=\"hljs-function\"><span class=\"hljs-title\">render</span>(<span class=\"hljs-params\"></span>)</span> {\n        <span class=\"hljs-keyword\">const</span> { mainColor } = <span class=\"hljs-built_in\">this</span>.state;\n        <span class=\"hljs-keyword\">return</span> (\n            <span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">mainColorContext.Provider</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">{{mainColor,changeMainColor:this.changeMainColor}}</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">&quot;blogContainer&quot;</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Header</span> &gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Header</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Main</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Main</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">mainColorContext.Provider</span>&gt;</span></span>\n        );\n    }\n}\n</code></pre>\n<p>Content.js组件中获取使用Consumer传递的数据和方法：</p>\n<pre><code><span class=\"hljs-keyword\">import</span> {mainColorContext} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;../../BlogPage/mainColorContext.js&#x27;</span>\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Content</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Component</span> </span>{\n    <span class=\"hljs-function\"><span class=\"hljs-title\">constructor</span>(<span class=\"hljs-params\">props</span>)</span> {\n        <span class=\"hljs-built_in\">super</span>(props);\n        <span class=\"hljs-built_in\">this</span>.state = {}\n    }\n    <span class=\"hljs-function\"><span class=\"hljs-title\">render</span>(<span class=\"hljs-params\"></span>)</span> {\n        <span class=\"hljs-keyword\">return</span> (\n            <span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">mainColorContext.Consumer</span>&gt;</span>\n                {value =&gt; (\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">&quot;content&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">{{</span> <span class=\"hljs-attr\">color:</span> <span class=\"hljs-attr\">value.mainColor</span> }}&gt;</span>\n                        文本...\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">&quot;button&quot;</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span>=&gt;</span>{value.changeMainColor(&#x27;#&#x27; + (Math.random() * 0xffffff &lt;&lt; 0).toString(16))}}&gt;切换颜色<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n                )}\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">mainColorContext.Consumer</span>&gt;</span></span>\n\n        );\n    }\n}\n</code></pre>\n"},"blog":{"path":"_blogs/SPA/react的状态管理/利用props状态提升.md","url":"/blog/SPA/react的状态管理/利用props状态提升","title":"react的状态管理—利用props状态提升","author":"yrobot","keywords":"状态管理,props,react,状态,提升,利用","createTime":1537200000000,"length":2341,"content":"<p><strong>本页目录：</strong><br><a href=\"#index\">场景思考</a><br><a href=\"#props\">利用props状态提升</a><br><a href=\"#result\">查看效果</a><br><a href=\"#code\">查看代码</a>  </p>\n<p><a id='index'></a></p>\n<h2 id=\"场景思考\">场景思考</h2>\n<p>现在我们用react去写一篇博客<br>博客包含 <code>标题</code> 和 <code>内容</code><br>而我期望<code>标题</code>和<code>内容</code>的颜色可以一键修改  </p>\n<p>当然最暴力的实现方式就是利用dom操作去被动的修改<br>但是有没有更优雅更可控的方式呢？  </p>\n<p>首先来看看项目的组件树：<br><img src=\"https://ws1.sinaimg.cn/large/006tNbRwgy1fvekxo7hlhj30c00aj0sy.jpg\" alt=\"\"></p>\n<p>那么有什么好的优雅的方式使<code>Title</code>和<code>Content</code>的颜色保持一致呢？<br>换句话说，怎么更好的管理<code>Title</code>和<code>Content</code>的状态呢？  </p>\n<p><a id='props'></a></p>\n<h2 id=\"利用props状态提升\">利用props状态提升</h2>\n<p>学习了react，就知道组件间数据交互最普遍的方式就是利用props传递<br>而目我们要做的就是Title和Content引用的是同一个颜色变量，而且在变量改变时组件自动重新渲染<br>利用react最基础的方法就是利用状态提升:<br>把一些共享的状态放在最顶端的组件中，子组件通过props去访问和修改这些状态  </p>\n<p>本场景中需要共享的状态只有一个<code>mainColor</code>和一个修改mainColor的函数<code>changeMainColor()</code><br>具体流程如下图：<br><img src=\"https://ws1.sinaimg.cn/large/006tNbRwgy1fvexnc4cbcj30ss0poacx.jpg\" alt=\"\">\n\b可以看到，需要在content和title中用mainColor，需要通过组件props层层传递到需要用状态的组件，函数也是同理  </p>\n<p><a id='result'></a></p>\n<h2 id=\"查看效果\">查看效果</h2>\n<ol>\n<li><img src=\"https://ws3.sinaimg.cn/large/006tNbRwgy1fvey3e0sw6j31kw0lmdoe.jpg\" alt=\"\"></li>\n<li><img src=\"https://ws1.sinaimg.cn/large/006tNbRwgy1fvey3n6qu4j31kw0n1aju.jpg\" alt=\"\"></li>\n<li><img src=\"https://ws4.sinaimg.cn/large/006tNbRwgy1fvey3xqxwpj31kw0nntin.jpg\" alt=\"\"></li>\n</ol>\n<p><a id='code'></a></p>\n<h2 id=\"查看代码\">查看代码</h2>\n<p>BlogPage中定义全局状态mainColor和方法changeMainColor()并传递： </p>\n<pre><code><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">BlogPage</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Component</span> </span>{\n    <span class=\"hljs-function\"><span class=\"hljs-title\">constructor</span>(<span class=\"hljs-params\">props</span>)</span> {\n        <span class=\"hljs-built_in\">super</span>(props);\n        <span class=\"hljs-built_in\">this</span>.state = {\n            <span class=\"hljs-attr\">mainColor</span>: <span class=\"hljs-string\">&#x27;black&#x27;</span>\n        }\n    }\n    changeMainColor = <span class=\"hljs-function\">(<span class=\"hljs-params\">color</span>) =&gt;</span> {\n        <span class=\"hljs-built_in\">this</span>.setState({\n            <span class=\"hljs-attr\">mainColor</span>: color\n        })\n    }\n    <span class=\"hljs-function\"><span class=\"hljs-title\">render</span>(<span class=\"hljs-params\"></span>)</span> {\n        <span class=\"hljs-keyword\">const</span> { mainColor } = <span class=\"hljs-built_in\">this</span>.state;\n        <span class=\"hljs-keyword\">return</span> (\n            <span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">&quot;blogContainer&quot;</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Header</span> <span class=\"hljs-attr\">mainColor</span>=<span class=\"hljs-string\">{mainColor}</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Header</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Main</span> <span class=\"hljs-attr\">mainColor</span>=<span class=\"hljs-string\">{mainColor}</span> <span class=\"hljs-attr\">changeMainColor</span>=<span class=\"hljs-string\">{this.changeMainColor}</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Main</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n        );\n    }\n}\n</code></pre>\n<p>Content组件中使用props传递的数据和方法：</p>\n<pre><code><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Content</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Component</span> </span>{\n    <span class=\"hljs-function\"><span class=\"hljs-title\">constructor</span>(<span class=\"hljs-params\">props</span>)</span> {\n        <span class=\"hljs-built_in\">super</span>(props);\n        <span class=\"hljs-built_in\">this</span>.state = {}\n    }\n    randomColor = <span class=\"hljs-function\">() =&gt;</span> {\n        <span class=\"hljs-built_in\">this</span>.props.changeMainColor(<span class=\"hljs-string\">&#x27;#&#x27;</span> + (<span class=\"hljs-built_in\">Math</span>.random() * <span class=\"hljs-number\">0xffffff</span> &lt;&lt; <span class=\"hljs-number\">0</span>).toString(<span class=\"hljs-number\">16</span>));\n    }\n    <span class=\"hljs-function\"><span class=\"hljs-title\">render</span>(<span class=\"hljs-params\"></span>)</span> {\n        <span class=\"hljs-keyword\">const</span> {mainColor}=<span class=\"hljs-built_in\">this</span>.props;\n        <span class=\"hljs-keyword\">return</span> (\n            <span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">&quot;content&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">{{color:mainColor}}</span>&gt;</span>\n                内容...\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">&quot;button&quot;</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{this.randomColor}</span>&gt;</span>切换颜色<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n        );\n    }\n}\n</code></pre>\n<hr>\n<p><em>\b本章节部分参考<a href=\"http://huziketang.mangojuice.top/books/react/lesson29\">React.js 小书</a>，在此感谢！</em></p>\n"},"next":{"path":"_blogs/HTML&CSS/利用css绘制多边形/README.md","url":"/blog/HTML&CSS/利用css绘制多边形","title":"利用css绘制多边形","author":"yrobot","keywords":"css,多边形,绘制,利用","createTime":1535904000000,"length":7041,"content":"<p>本文主要讲解内容：</p>\n<ol>\n<li>css 绘制多边形的原理(一定要理解)</li>\n<li>一些简单多边形的绘制示例</li>\n</ol>\n<p><strong>本页目录：</strong><br><a href=\"#id1\">css 绘制多边形的原理</a></p>\n<ul>\n<li><a href=\"#id11\">首先我们要知道 css 盒模型是什么样的</a></li>\n<li><a href=\"#id12\">然后我们还要理解 border</a></li>\n<li><a href=\"#id13\">还要会用 css 伪元素</a></li>\n</ul>\n<p><a href=\"#id2\">css 绘制正四边形</a><br><a href=\"#id3\">css 绘制非正四边形</a><br><a href=\"#id4\">css 绘制三角形</a><br><a href=\"#id5\">css 绘制圆形</a><br><a href=\"#id6\">css 绘制梯形</a><br><a href=\"#id7\">css 绘制正五边形</a><br><a href=\"#id8\">css 绘制正七边形</a></p>\n<p><a id='id1'></a></p>\n<h2 id=\"css-绘制多边形的原理\">css 绘制多边形的原理</h2>\n<p><a href=\"\" id=\"id11\"></a></p>\n<h3 id=\"首先我们要知道-css-盒模型是什么样的\"><strong>首先我们要知道 css 盒模型是什么样的</strong></h3>\n<p><img src=\"https://ws3.sinaimg.cn/large/0069RVTdgy1fuw4xid010j30a809aq38.jpg\" alt=\"\"><br>所谓的盒模型，可以理解为元素的表现内容，看上图可以发现：</p>\n<pre><code><span class=\"hljs-attr\">盒模型 </span>=<span class=\"hljs-string\"> 内容 + padding + border + margin</span>\n</code></pre>\n<p>组成理解(<em>简单介绍</em> )：<br><code>内容</code> 元素内 文本、内元素 所包含的区域<br><code>padding</code> \b 内容 与 border 之间的距离，用于处理 border 和内容的表现关系<br><code>border</code> 边框，将内容包围的轮廓<br><code>margin</code> 元素 与 其他元素之间的距离，用于处理元素间的表现关系，位置样式</p>\n<p>一般理解的 元素 由 内容、padding、border 组成，因为这 3 个影响到元素的表现样式。<br>css2 中<code>width</code>的默认指向是内容宽度，而不是元素(包括 padding、border)的宽度。<br>\b 可以 利用 <code>box-sizing</code> 去修改 width 的指向：</p>\n<ul>\n<li><code>box-sizing: content-box;</code> width、height 指向内容<br> <img src=\"https://ws2.sinaimg.cn/large/0069RVTdgy1fuw5olkw8wj303o010mx2.jpg\" alt=\"\"></li>\n<li><code>box-sizing: border-box;</code> width、height 指向一般元素<br> <img src=\"https://ws1.sinaimg.cn/large/0069RVTdgy1fuw5p6zb80j305q04wdgb.jpg\" alt=\"\"></li>\n</ul>\n<p>看下结果：<em>语言:stylus</em></p>\n<pre><code class=\"language-css\"><span class=\"hljs-selector-class\">.boxsize1</span>\n    <span class=\"hljs-attribute\">width</span> <span class=\"hljs-number\">100px</span>\n    <span class=\"hljs-attribute\">height</span> <span class=\"hljs-number\">80px</span>\n    <span class=\"hljs-attribute\">background-color</span> <span class=\"hljs-number\">#393</span>\n    <span class=\"hljs-attribute\">border</span> <span class=\"hljs-number\">20px</span> solid <span class=\"hljs-number\">#999</span>\n<span class=\"hljs-selector-class\">.boxsize2</span>\n    <span class=\"hljs-attribute\">width</span> <span class=\"hljs-number\">100px</span>\n    <span class=\"hljs-attribute\">height</span> <span class=\"hljs-number\">80px</span>\n    <span class=\"hljs-attribute\">background-color</span> <span class=\"hljs-number\">#393</span>\n    <span class=\"hljs-attribute\">border</span> <span class=\"hljs-number\">20px</span> solid <span class=\"hljs-number\">#999</span>\n    <span class=\"hljs-attribute\">box-sizing</span> border-box  //默认元素宽高指定，内容宽高自适应;\n</code></pre>\n<p><img src=\"https://ws4.sinaimg.cn/large/0069RVTdgy1fuw6rtydjoj30ci0egweo.jpg\" alt=\"\"></p>\n<p>本章我们就要利用元素的表现样式(内容、padding、border )进行图形绘制<br><a href=\"\" id=\"id12\"></a></p>\n<h3 id=\"然后我们还要理解-border\"><strong>然后我们还要理解 border</strong></h3>\n<p>我们先来看一段有趣的代码：</p>\n<pre><code class=\"language-css\"><span class=\"hljs-selector-class\">.square1</span> {\n  <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">0px</span>;\n  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">0px</span>;\n  <span class=\"hljs-attribute\">border-width</span>: <span class=\"hljs-number\">40px</span> <span class=\"hljs-number\">50px</span>;\n  <span class=\"hljs-attribute\">border-style</span>: solid;\n  <span class=\"hljs-attribute\">border-color</span>: <span class=\"hljs-number\">#f00</span> <span class=\"hljs-number\">#008000</span> <span class=\"hljs-number\">#808080</span> <span class=\"hljs-number\">#00f</span>;\n}\n</code></pre>\n<p>想想一下，这段代码的渲染效果是什么样的?<br>css 是怎么处理 border 重叠的部分的？\n好了，想清楚了，就来看一下结果吧。<br><img src=\"https://ws3.sinaimg.cn/large/0069RVTdgy1fuw65nqy85j309001u0sr.jpg\" alt=\"\"><br><img src=\"https://ws4.sinaimg.cn/large/0069RVTdgy1fuw60spn4lj306i05g0sm.jpg\" alt=\"\"><br>他的盒模型：<br><img src=\"https://ws4.sinaimg.cn/large/0069RVTdgy1fuw62e6752j307y05umxa.jpg\" alt=\"\"><br>可以得出规律：</p>\n<ol>\n<li>border 的长 = 盒模型对应的长或宽</li>\n<li>相邻方向 border 冲突时，进行等比均分。</li>\n</ol>\n<p>在接下来的很多例子中都会用到 border 的这个规律<br><a href=\"\" id=\"id13\"></a></p>\n<h3 id=\"还要会用-css-伪元素\"><strong>还要会用 css 伪元素</strong></h3>\n<p><strong>css 的伪元素：</strong> 之所以被称为伪元素，是因为他们不是真正的页面元素，html 没有对应的元素，但是其所有用法和表现行为与真正的页面元素一样，可以对其使用诸如页面元素一样的 css 样式，表面上看上去貌似是页面的某些元素来展现，实际上是 css 样式展现的行为，因此被称为伪元素。</p>\n<p>我们在绘制图形发现需要进行元素组装时，就可以利用伪元素 来减少对 HTML 元素的使用。</p>\n<p><a href=\"https://www.cnblogs.com/wonyun/p/5807191.html\">css 伪元素的用法</a></p>\n<p><a id='id2'></a></p>\n<h2 id=\"css-绘制正四边形\">css 绘制正四边形</h2>\n<p>绘制正四边形最简单的方法就是利用内容，直接使用 width、height</p>\n<pre><code class=\"language-css\"><span class=\"hljs-selector-class\">.square2</span> {\n  <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">80px</span>;\n  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">80px</span>;\n  <span class=\"hljs-attribute\">background-color</span>: <span class=\"hljs-number\">#393</span>;\n}\n</code></pre>\n<p><img src=\"https://ws3.sinaimg.cn/large/0069RVTdgy1fuw6wmpdi1j309w092q31.jpg\" alt=\"\"></p>\n<p>当然利用 border 也可以</p>\n<pre><code class=\"language-css\"><span class=\"hljs-selector-class\">.square3</span> {\n  <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">0px</span>;\n  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">0px</span>;\n  <span class=\"hljs-attribute\">border-width</span>: <span class=\"hljs-number\">40px</span>;\n  <span class=\"hljs-attribute\">border-style</span>: solid;\n  <span class=\"hljs-attribute\">border-color</span>: <span class=\"hljs-number\">#008000</span>;\n}\n</code></pre>\n<p><img src=\"https://ws3.sinaimg.cn/large/0069RVTdgy1fuw6ypx233j30a208s74d.jpg\" alt=\"\"></p>\n<p><a id='id3'></a></p>\n<h2 id=\"css-绘制非正四边形\">css 绘制非正四边形</h2>\n<h4 id=\"绘制平行四边形\">绘制平行四边形</h4>\n<p>平行四边形利用<a href=\"/blog/CSS3/CSS3-2D%E8%BD%AC%E6%8D%A2#14\">css3 的倾斜函数 skew()</a>比较方便</p>\n<pre><code class=\"language-css\"><span class=\"hljs-selector-class\">.parallelogram</span> {\n  <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">100px</span>;\n  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">80px</span>;\n  <span class=\"hljs-attribute\">background</span>: <span class=\"hljs-number\">#393</span>;\n  -webkit-<span class=\"hljs-attribute\">transform</span>: <span class=\"hljs-built_in\">skew</span>(-<span class=\"hljs-number\">30deg</span>);\n  -moz-<span class=\"hljs-attribute\">transform</span>: <span class=\"hljs-built_in\">skew</span>(-<span class=\"hljs-number\">30deg</span>);\n  -o-<span class=\"hljs-attribute\">transform</span>: <span class=\"hljs-built_in\">skew</span>(-<span class=\"hljs-number\">30deg</span>);\n  <span class=\"hljs-attribute\">transform</span>: <span class=\"hljs-built_in\">skew</span>(-<span class=\"hljs-number\">30deg</span>);\n}\n</code></pre>\n<p><img src=\"https://ws2.sinaimg.cn/large/0069RVTdgy1fuw79w9e6dj30bk08cweo.jpg\" alt=\"\"></p>\n<p>当然使用 <code>border</code> + <code>:after</code>伪类也是可以的</p>\n<pre><code class=\"language-css\"><span class=\"hljs-selector-class\">.parallelogram2</span> {\n  <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">0px</span>;\n  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">0px</span>;\n  <span class=\"hljs-attribute\">border-bottom</span>: <span class=\"hljs-number\">80px</span> solid <span class=\"hljs-number\">#393</span>;\n  <span class=\"hljs-attribute\">border-left</span>: <span class=\"hljs-number\">80px</span> solid transparent;\n}\n<span class=\"hljs-selector-class\">.parallelogram2</span>:after {\n  display: block;\n  <span class=\"hljs-attribute\">content</span>: <span class=\"hljs-string\">&#x27;&#x27;</span>;\n  <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">0px</span>;\n  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">0px</span>;\n  <span class=\"hljs-attribute\">border-top</span>: <span class=\"hljs-number\">80px</span> solid <span class=\"hljs-number\">#393</span>;\n  <span class=\"hljs-attribute\">border-right</span>: <span class=\"hljs-number\">80px</span> solid transparent;\n}\n</code></pre>\n<p><img src=\"https://ws3.sinaimg.cn/large/0069RVTdgy1fuw7opf0mhj30bq06qwee.jpg\" alt=\"\"></p>\n<h4 id=\"绘制菱形\">绘制菱形</h4>\n<p>思路：绘制两个等边三角形，进行拼接（<code>height = sqr(3)*width/2</code>）</p>\n<pre><code class=\"language-css\"><span class=\"hljs-selector-class\">.rhombus</span> {\n  <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">0px</span>;\n  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">0px</span>;\n  <span class=\"hljs-attribute\">border-bottom</span>: <span class=\"hljs-number\">69.3px</span> solid <span class=\"hljs-number\">#393</span>;\n  <span class=\"hljs-attribute\">border-left</span>: <span class=\"hljs-number\">40px</span> solid transparent;\n  <span class=\"hljs-attribute\">border-right</span>: <span class=\"hljs-number\">40px</span> solid transparent;\n}\n<span class=\"hljs-selector-class\">.rhombus</span>:after {\n  display: block;\n  <span class=\"hljs-attribute\">content</span>: <span class=\"hljs-string\">&#x27;&#x27;</span>;\n  <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">0px</span>;\n  <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">0px</span>;\n  <span class=\"hljs-attribute\">border-top</span>: <span class=\"hljs-number\">69.3px</span> solid <span class=\"hljs-number\">#393</span>;\n  <span class=\"hljs-attribute\">border-left</span>: <span class=\"hljs-number\">40px</span> solid transparent;\n  <span class=\"hljs-attribute\">border-right</span>: <span class=\"hljs-number\">40px</span> solid transparent;\n}\n</code></pre>\n<p><img src=\"https://ws4.sinaimg.cn/large/0069RVTdgy1fuwb07zx8zj308605o748.jpg\" alt=\"\"></p>\n<p><a id='id4'></a></p>\n<h2 id=\"css-绘制三角形\">css 绘制三角形</h2>\n<h4 id=\"绘制直角三角形\">绘制直角三角形</h4>\n<pre><code class=\"language-css\"><span class=\"hljs-selector-class\">.rightTriangle</span> <span class=\"hljs-attribute\">width</span> 0px <span class=\"hljs-attribute\">height</span> 0px <span class=\"hljs-attribute\">border-bottom</span> 80px solid <span class=\"hljs-selector-id\">#393</span> <span class=\"hljs-attribute\">border-left</span> 80px solid transparent;\n</code></pre>\n<p><img src=\"https://ws2.sinaimg.cn/large/0069RVTdgy1fuwcpx6dhfj306s06aa9x.jpg\" alt=\"\"></p>\n<h4 id=\"绘制等边三角形\">绘制等边三角形</h4>\n<p>等边三角形的宽高比为 1 : sqr(3)/2<br>所以 \b 可以根据底边长计算三角形高<code>height = sqr(3)*width/2</code><br>本例中左右 border 宽为 40，所以底边长为 80，从而计算出底部 border 宽应为 69.3</p>\n<pre><code class=\"language-css\"><span class=\"hljs-selector-class\">.triangle</span>\n  <span class=\"hljs-attribute\">width</span>\n  0px\n  <span class=\"hljs-attribute\">height</span>\n  0px\n  <span class=\"hljs-attribute\">border-bottom</span>\n  69<span class=\"hljs-selector-class\">.3px</span>\n  solid\n  <span class=\"hljs-selector-id\">#393</span>\n  <span class=\"hljs-attribute\">border-left</span>\n  40px\n  solid\n  transparent\n  <span class=\"hljs-attribute\">border-right</span>\n  40px\n  solid\n  transparent;\n</code></pre>\n<p><img src=\"https://ws1.sinaimg.cn/large/0069RVTdgy1fuwb2kyyzqj306g064746.jpg\" alt=\"\"></p>\n<p><a id='id5'></a></p>\n<h2 id=\"css-绘制圆形\">css 绘制圆形</h2>\n<p>圆形最简单的方式就是设置<code>border-radius</code>为 50%</p>\n<pre><code class=\"language-css\">.circle1 <span class=\"hljs-built_in\">width</span> 80px <span class=\"hljs-built_in\">height</span> 80px <span class=\"hljs-built_in\">border</span>-<span class=\"hljs-built_in\">radius</span> <span class=\"hljs-number\">50</span><span class=\"hljs-symbol\">%</span> <span class=\"hljs-built_in\">background</span>-<span class=\"hljs-built_in\">color</span> #<span class=\"hljs-number\">393</span>;\n</code></pre>\n<p><img src=\"https://ws1.sinaimg.cn/large/0069RVTdgy1fuwcsqggv5j306c068a9z.jpg\" alt=\"\"></p>\n<p>也可以使用 border 实现</p>\n<pre><code class=\"language-css\">.circle2 <span class=\"hljs-built_in\">width</span> <span class=\"hljs-number\">0px</span> <span class=\"hljs-built_in\">height</span> <span class=\"hljs-number\">0px</span> <span class=\"hljs-built_in\">border</span> 40px solid #<span class=\"hljs-number\">393</span> <span class=\"hljs-built_in\">border</span>-<span class=\"hljs-built_in\">radius</span> <span class=\"hljs-number\">50</span><span class=\"hljs-symbol\">%</span>;\n</code></pre>\n<p>\b 哎？猜猜这时候设置 padding 是什么样子的</p>\n<pre><code class=\"language-css\"><span class=\"hljs-selector-class\">.circle3</span> <span class=\"hljs-attribute\">width</span> 0px <span class=\"hljs-attribute\">height</span> 0px <span class=\"hljs-attribute\">border</span> 40px solid <span class=\"hljs-selector-id\">#393</span> <span class=\"hljs-attribute\">border-radius</span> 50% <span class=\"hljs-attribute\">padding</span> 20px;\n</code></pre>\n<p><img src=\"https://ws3.sinaimg.cn/large/0069RVTdgy1fuwcyjhdw6j308408874b.jpg\" alt=\"\"><br>看来 border-radius 把内外角度都设置了</p>\n<p><a id='id6'></a></p>\n<h2 id=\"css-绘制梯形\">css 绘制梯形</h2>\n<pre><code class=\"language-css\"><span class=\"hljs-selector-class\">.trapezoid</span>\n  <span class=\"hljs-attribute\">width</span>\n  40px\n  <span class=\"hljs-attribute\">height</span>\n  0px\n  <span class=\"hljs-attribute\">border-top</span>\n  40px\n  solid\n  <span class=\"hljs-selector-id\">#393</span>\n  <span class=\"hljs-attribute\">border-left</span>\n  20px\n  solid\n  transparent\n  <span class=\"hljs-attribute\">border-right</span>\n  20px\n  solid\n  transparent;\n</code></pre>\n<p><img src=\"https://ws1.sinaimg.cn/large/0069RVTdgy1fuwd59x6bsj306w04gwec.jpg\" alt=\"\"></p>\n<p><a id='id7'></a></p>\n<h2 id=\"css-绘制正五边形\">css 绘制正五边形</h2>\n<p>正五边形可以拆分成上下两个部分：上边一个等腰三角形，下面一个等腰梯形，具体长宽计算这里不做介绍</p>\n<pre><code class=\"language-css\"><span class=\"hljs-selector-class\">.pentagon</span> {\n  <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">0px</span>;\n  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">0px</span>;\n  <span class=\"hljs-attribute\">border-top</span>: <span class=\"hljs-number\">0px</span>;\n  <span class=\"hljs-attribute\">border-right</span>: <span class=\"hljs-number\">81px</span> solid transparent;\n  <span class=\"hljs-attribute\">border-left</span>: <span class=\"hljs-number\">81px</span> solid transparent;\n  <span class=\"hljs-attribute\">border-bottom</span>: <span class=\"hljs-number\">59px</span> solid <span class=\"hljs-number\">#393</span>;\n}\n<span class=\"hljs-selector-class\">.pentagon</span>:after {\n  position: relative;\n  <span class=\"hljs-attribute\">left</span>: -<span class=\"hljs-number\">81px</span>;\n  <span class=\"hljs-attribute\">top</span>: <span class=\"hljs-number\">59px</span>;\n  <span class=\"hljs-attribute\">display</span>: block;\n  <span class=\"hljs-attribute\">content</span>: <span class=\"hljs-string\">&#x27;&#x27;</span>;\n  <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">100px</span>;\n  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">0px</span>;\n  <span class=\"hljs-attribute\">border-top</span>: <span class=\"hljs-number\">95px</span> solid <span class=\"hljs-number\">#393</span>;\n  <span class=\"hljs-attribute\">border-left</span>: <span class=\"hljs-number\">31px</span> solid transparent;\n  <span class=\"hljs-attribute\">border-right</span>: <span class=\"hljs-number\">31px</span> solid transparent;\n}\n</code></pre>\n<p><img src=\"https://ws3.sinaimg.cn/large/0069RVTdgy1fuwdlbgoi3j30be0a8t8r.jpg\" alt=\"\"></p>\n<p><a id='id8'></a></p>\n<h2 id=\"css-绘制正七边形\">css 绘制正七边形</h2>\n<p>正七边形比较复杂，需要将整个图形分成 3 份来做<br><img src=\"https://ws1.sinaimg.cn/large/0069RVTdgy1fuwdo5l0qrj307s07974m.jpg\" alt=\"\"><br>上：等腰三角形<br>中：等腰梯形<br>下：等腰梯形</p>\n<pre><code class=\"language-css\"><span class=\"hljs-selector-class\">.heptagon</span> {\n  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">0px</span>;\n  <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">180px</span>;\n  <span class=\"hljs-attribute\">border-left</span>: <span class=\"hljs-number\">22px</span> solid transparent;\n  <span class=\"hljs-attribute\">border-right</span>: <span class=\"hljs-number\">22px</span> solid transparent;\n  <span class=\"hljs-attribute\">border-bottom</span>: <span class=\"hljs-number\">97px</span> solid <span class=\"hljs-number\">#393</span>;\n  <span class=\"hljs-attribute\">margin-top</span>: <span class=\"hljs-number\">63px</span>;\n}\n<span class=\"hljs-selector-class\">.heptagon</span>:before {\n  display: block;\n  <span class=\"hljs-attribute\">content</span>: <span class=\"hljs-string\">&#x27;&#x27;</span>;\n  <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">0px</span>;\n  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">0px</span>;\n  <span class=\"hljs-attribute\">border-right</span>: <span class=\"hljs-number\">90px</span> solid transparent;\n  <span class=\"hljs-attribute\">border-left</span>: <span class=\"hljs-number\">90px</span> solid transparent;\n  <span class=\"hljs-attribute\">border-bottom</span>: <span class=\"hljs-number\">43px</span> solid <span class=\"hljs-number\">#393</span>;\n  <span class=\"hljs-attribute\">position</span>: relative;\n  <span class=\"hljs-attribute\">top</span>: -<span class=\"hljs-number\">43px</span>;\n}\n<span class=\"hljs-selector-class\">.heptagon</span>:after {\n  width: <span class=\"hljs-number\">100px</span>;\n  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">0px</span>;\n  <span class=\"hljs-attribute\">content</span>: <span class=\"hljs-string\">&#x27;&#x27;</span>;\n  <span class=\"hljs-attribute\">display</span>: block;\n  <span class=\"hljs-attribute\">border-top</span>: <span class=\"hljs-number\">78px</span> solid <span class=\"hljs-number\">#393</span>;\n  <span class=\"hljs-attribute\">border-left</span>: <span class=\"hljs-number\">62px</span> solid transparent;\n  <span class=\"hljs-attribute\">border-right</span>: <span class=\"hljs-number\">62px</span> solid transparent;\n  <span class=\"hljs-attribute\">position</span>: relative;\n  <span class=\"hljs-attribute\">left</span>: -<span class=\"hljs-number\">22px</span>;\n  <span class=\"hljs-attribute\">bottom</span>: -<span class=\"hljs-number\">54px</span>;\n}\n</code></pre>\n<p><img src=\"https://ws3.sinaimg.cn/large/0069RVTdgy1fuwe4xtv6lj30ec0dowen.jpg\" alt=\"\"></p>\n"}},"__N_SSG":true}