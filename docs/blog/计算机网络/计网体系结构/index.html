<!DOCTYPE html><html><head><link rel="icon" href="favicon.ico"/><link rel="preload" href="//at.alicdn.com/t/font_2533274_yhzuq4j0hfr.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="stylesheet" href="//at.alicdn.com/t/font_2533274_yhzuq4j0hfr.css"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/><meta name="keywords" content="yrobot,blog,博客,计网,OSI,TCP,IP,五层协议体系,体系结构"/><meta name="description" content="计网体系结构 - OSI、TCP/IP、五层协议体系"/><title>计网体系结构 - OSI、TCP/IP、五层协议体系</title><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/0e71a3e4ef78433dbcc6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0e71a3e4ef78433dbcc6.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-353d88844ab2a1fc4db5.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework-d3984ef788efc6bd8157.js" as="script"/><link rel="preload" href="/_next/static/chunks/597-9d03ea954e499bbdd7af.js" as="script"/><link rel="preload" href="/_next/static/chunks/778-1467ee0b708f5cd375c0.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-9ca82ec4d4aca520c43d.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-d1fff168fcebfddb9829.js" as="script"/><link rel="preload" href="/_next/static/chunks/525-eaa095b223f3548a6266.js" as="script"/><link rel="preload" href="/_next/static/chunks/644-1b1b80a38bd95016983b.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5B...path%5D-3b49df77748c00cbb7fd.js" as="script"/></head><body><div id="__next"><div class="mx-auto md:max-w-screen-lg 2xl:max-w-screen-2xl"><div class="md:flex flex-row items-start justify-between"><div class="card menu h-60px md:flex-none md:w-90px md:h-600px md:mr-20px 2xl:w-120px 2xl:h-850px 2xl: 2xl:mr-50px flex flex-row items-center justify-between md:flex-col mb-20px"><a class="iconfont iconlogo flex-none mr-auto ml-15px md:ml-0 md:mr-0 md:mt-20px md:mb-auto w-30px h-30px text-30px md:w-50px md:h-50px md:text-50px 2xl:w-60px 2xl:h-60px 2xl:text-60px"></a><a class="iconfont iconhome cursor-pointer flex-none w-20px h-20px text-20px mr-20px md:mr-0 md:mb-50px md:w-30px md:h-30px md:text-30px" href="/"></a><a class="iconfont icongithub cursor-pointer flex-none w-20px h-20px text-20px mr-20px md:mr-0 md:mb-50px md:w-30px md:h-30px md:text-30px" target="_blank" href="https://github.com/Yrobot"></a><a class="iconfont iconemail cursor-pointer flex-none w-20px h-20px text-20px  mr-20px md:mr-0 md:mb-50px md:w-30px md:h-30px md:text-30px" href="mailto:y_robot@yeah.net?subject="></a><a class="iconfont cursor-pointer flex-none w-20px h-20px text-20px mr-15px md:mr-0 md:mb-20px 2xl:mb-50px md:w-30px md:h-30px md:text-30px iconenglish"></a></div><div class="min-w-0 flex-auto 2xl:flex flex-row items-start justify-between"><div class="min-w-0 2xl:flex-auto 2xl:mr-50px 2xl:pt-30px"><div class="text-center text-xl mb-6px md:text-4xl md:font-bold md:mb-10px 2xl:text-5xl 2xl:mb-15px font-medium">计网体系结构 - OSI、TCP/IP、五层协议体系</div><div class="text-center whitespace-pre-wrap text-gray-500 font-light text-14px leading-20px md:text-16px mb-20px">2018-10-06  |  <!-- -->13<!-- -->分钟<!-- -->  |  yrobot  |  <span class="md:hidden">
</span>计网,OSI,TCP,IP,五层协议体系,体系结构</div><article class="prose prose-sm md:prose 2xl:prose-lg mb-15px md:mb-20px"><p><strong>本页目录：</strong><br><a href="#inall">简而言之</a><br><a href="#osi">OSI 的体系结构</a><br><a href="#tcpip">TCP/IP 的结构体系</a><br><a href="#five">五层体系结构</a>  </p>
<p><a id='inall'></a></p>
<h2 id="简而言之">简而言之</h2>
<p>总的来说，计网结构体系分成三种：  </p>
<ol>
<li>OSI 的体系结构</li>
<li>TCP/IP 的结构体系</li>
<li><a href="#five">五层体系结构</a> [着重学习]</li>
</ol>
<p><code>OSI的体系结构</code> 是由国际标准化组织ISO提出的一种标准框架，他有7层体系，但是由于 1.OSI缺乏商业驱动 2.协议较复杂，运行效率低   3.OSI层次划分不合理，功能出现重复。导致OSI止步于理论层面。  </p>
<p><code>TCP/IP的结构体系</code> 是由于OSI的复杂不实用，TCP/IP就应运而生了，他在ISO发表之前就出现了。TCP/IP只有4层体系，并且得到了市场的肯定。  </p>
<p><code>五层体系结构</code> 是因为OSI概念清除体系完整，而TCP/IP更具实用价值，所以我们学习的时候会学习较为折中的 五层协议的体系结构。</p>
<p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fvygqapt6bj30g108yti3.jpg" alt=""></p>
<table>
<thead>
<tr>
<th>OSI参考层编号</th>
<th>等效的OSI层</th>
<th>五层协议体系</th>
<th>TCP/IP协议体系</th>
<th>TCP/IP协议示例</th>
</tr>
</thead>
<tbody><tr>
<td>7、6、5</td>
<td>应用、表示、会话</td>
<td>应用</td>
<td>应用层</td>
<td>HTTP、HTTPS、NFS、NIS、DNS、LDAP、telnet、ftp、rlogin、rsh、rcp、RIP、RDISC、SNMP 等</td>
</tr>
<tr>
<td>4</td>
<td>传输</td>
<td>传输</td>
<td>运输层</td>
<td>TCP、UDP、SCTP</td>
</tr>
<tr>
<td>3</td>
<td>网络</td>
<td>网络</td>
<td>网际层IP</td>
<td>IPv4、IPv6、ARP、ICMP</td>
</tr>
<tr>
<td>2</td>
<td>数据链路</td>
<td>数据链路</td>
<td>网络接口层</td>
<td>PPP、IEEE 802.2</td>
</tr>
<tr>
<td>1</td>
<td>物理</td>
<td>物理网络</td>
<td>网络接口层</td>
<td>以太网 (IEEE 802.3)、令牌环、RS-232、FDDI 等等</td>
</tr>
<tr>
<td><a id='osi'></a></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="osi-的体系结构">OSI 的体系结构</h2>
<p>OSI体系结构，意为开放式系统互联。<br>国际标准组织（国际标准化组织）制定了OSI模型。这个模型把网络通信的工作分为7层<br>分别是 <code>物理层, 数据链路层, 网络层, 传输层, 会话层, 表示层 和 应用层</code>。  </p>
<p><strong>OSI体系从上到下解析：</strong>  </p>
<ol>
<li><p>应用层（Application Layer）提供为应用软件而设的接口，以设置与另一应用软件之间的通信。例如: HTTP，HTTPS，FTP，TELNET，SSH，SMTP，POP3等。</p>
</li>
<li><p>表达层（Presentation Layer）把数据转换为能与接收者的系统格式兼容并适合传输的格式。</p>
</li>
<li><p>会话层（Session Layer）负责在数据传输中设置和维护计算机网络中两台计算机之间的通信连接。</p>
</li>
<li><p>传输层（Transport Layer）把传输表头（TH）加至数据以形成数据包。传输表头包含了所使用的协议等发送信息。例如:传输控制协议（TCP）等。</p>
</li>
<li><p>网络层（Network Layer）决定数据的路径选择和转寄，将网络表头（NH）加至数据包，以形成分组。网络表头包含了网络数据。例如:互联网协议（IP）等。</p>
</li>
<li><p>数据链路层（Data Link Layer）负责网络寻址、错误侦测和改错。当表头和表尾被加至数据包时，会形成帧。数据链表头（DLH）是包含了物理地址和错误侦测及改错的方法。数据链表尾（DLT）是一串指示数据包末端的字符串。例如以太网、无线局域网（Wi-Fi）和通用分组无线服务（GPRS）等。<br>分为两个子层：逻辑链路控制（logic link control，LLC）子层和介质访问控制（media access control，MAC）子层。</p>
</li>
<li><p>物理层（Physical Layer）在局部局域网上传送数据帧（data frame），它负责管理计算机通信设备和网络媒体之间的互通。包括了针脚、电压、线缆规范、集线器、中继器、网卡、主机适配器等。</p>
</li>
</ol>
<p><a id='tcpip'></a></p>
<h2 id="tcpip-的结构体系">TCP/IP 的结构体系</h2>
<p><strong>1. 本机内TCP/IP体系结构展示：</strong><br><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fvzspp8fp6j30d9073n1n.jpg" alt="">  </p>
<p><strong>2. 网络间TCP/IP体系结构展示：</strong><br><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fvytqvroucj30fu09045j.jpg" alt="">  </p>
<p><a id='from5'></a>  </p>
<p><strong>3. TCP/IP 体系从上到下解析</strong>  </p>
<ol>
<li><p><strong>应用层：</strong>
应用层是体系结构中的最高层，它直接为用户的应用程序提供服务，在因特网中应用层的协议很多，如支持万维网应用的http协议，支持电邮的smtp协议，支持文件传输的ftp协议等等。<br>我们将应用层交互的数据单元称为 __报文__。 </p>
</li>
<li><p><strong>运输层：</strong> 它为两个主机中的进程间提供通用的传输服务。主要有复用(向下传)和分用(向上传)两个功能。<br> 运输层主要使用以下两种协议：TCP和UDP   </p>
<ul>
<li>TCP：_Transmission Contol Protocol_，传输控制协议，面向连接的，数据传输的单位是报文段，能够提供可靠地交付。  </li>
<li>UDP：_User Datagram Protocol_，用户数据报协议，无连接的，数据传输的单位是用户数据报，不保证提供可靠地交付。</li>
</ul>
</li>
<li><p><strong>网络层：</strong>
 负责为分组交换网上的不同主机提供通信服务。<br> (作用1)在发送数据时，网络层把运输层产生的报文段或用户数据报封装成分组或包进行传送。<br> 在TCP/IP体系中，由于网络层使用IP协议，因此分组也叫做IP数据报，简称数据报。<br> (作用2)网络层的另一个任务就是要选择合适的路由，<br> 使源主机运输层所传下来的分组，能够通过网络中的路由器找到目的主机。  </p>
</li>
<li><p><strong>网络接口层：</strong> 对于TCP/IP结构体系，的这一层主要包含 五层协议 的数据链路层和物理层    </p>
<ul>
<li><p>数据链路层：<br>链路层将网络层交下来的IP数据报组装成帧，在两个相邻结点之间的链路上透明地传送帧中的数据。控制端在接收数据时，控制信息使接收端能够知道一个帧从哪个比特开始和到哪个比特结束。这样，数据链路层在收到一个帧后，就可从中提取出数据部分，上交给网络层。控制信息还使得接收端能够检测到所收到的帧中有无差错。如果发现有差错，数据链路层就简单地丢弃这个出错的帧，以免传下去白白浪费网络资源。如果需要改正错误，就由运输层的TCP协议来完成。(数据信息的确认交给更高层的网络层或者应用层实现)</p>
</li>
<li><p>物理层：在物理层上所传数据的单位是比特。物理层的任务就是透明地传送比特流。</p>
</li>
</ul>
</li>
</ol>
<p><a id='five'></a></p>
<h2 id="五层体系结构">五层体系结构</h2>
<p>五层体系结构主要是将TCP/IP体系拆分成5层，便于学习：  </p>
<ol>
<li>__应用层__：应用层定义的是 应用间通信和交互的规则，如HTTP、FTP等</li>
<li>__运输层__：它为两个主机中的进程间提供通用的传输服务。主要有复用(向下传)和分用(向上传)两个功能。运输方式分为TCP、UDP两种协议</li>
<li>__网络层__：为运输层的数据包选择合适的路由协议(TCP/IP中用的是IP协议)，地址解析 和 路由 是网络层的重要目的。</li>
<li>__数据链路层__：数据链路层在不可靠的物理介质上提供可靠的传输。作用包括：物理地址寻址、数据的成帧、流量控制、数据的检错、重发等。</li>
<li>__物理层__：物理层主要负责 数据 和 物理信号 之间的互相转换。(比如0和1转换为电信号分别用几伏表示传输)</li>
</ol>
<p>具体每层的内容参看<a href="#from5">TCP/IP 体系从上到下解析</a>  </p>
<p>五层体系结构的数据传输 <strong>图解</strong> ：<br><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fw0ndnh4hzj30rs0d4qiu.jpg" alt=""></p>
</article><div class="overflow-hidden flex flex-row items-center justify-between pt-10px md:pt-15px border-t-1px border-gray-200 mb-20px md:mb-40px"><span class="iconfont iconleft flex-none w-14px h-14px text-14px md:w-16px md:h-16px md:text-16px md:mr-4px"></span><a href="/blog/HTML&amp;CSS/css层叠上下文" class="flex-none w-40% text-14px leading-16px md:text-16px overflow-hidden whitespace-nowrap overflow-ellipsis">css层叠上下文</a><div class="mx-auto"></div><a href="/blog/微信小程序/小程序的分享与传参" class="flex-none w-40% text-right text-14px leading-16px md:text-16px overflow-hidden whitespace-nowrap overflow-ellipsis">小程序的分享与传参</a><span class="iconfont iconright flex-none w-14px h-14px text-14px md:w-16px md:h-16px md:text-16px md:ml-4px"></span></div><div class="mb-20px"><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div id="vcomments"></div></div></div><div class="2xl:flex-none 2xl:w-580px"><div class="pt-24px md:pt-24px 2xl:pt-30px mb-15px md:mb-20px"><div class="relative card pl-20px flex flex-col items-start justify-center h-96px md:h-126px 2xl:h-160px pr-120px md:pr-170px 2xl:pr-195px"><div class="text-20px md:text-26px 2xl:text-36px font-bold mb-10px md:mb-15px 2xl:mb-15px">你好！我是Yrobot</div><div class="text-14px md:text-16px 2xl:text-16px">欢迎来到我的博客，希望你在这里玩得开心！</div><img class="h-120px md:h-150px 2xl:h-190px absolute bottom-0 right-20px" src="/assets/person.svg" alt="person"/></div></div><div class="card mb-15px md:mb-20px overflow-hidden"><a href="https://github.com/Yrobot" target="_blank"><img src="https://github-readme-stats.vercel.app/api?count_private=true&amp;show_icons=true&amp;username=yrobot&amp;title_color=000000&amp;icon_color=000000&amp;text_color=000000&amp;border_color=F4F4F5&amp;bg_color=F4F4F5" alt="GithubCard"/></a></div><div class="card mb-15px md:mb-20px overflow-hidden"><a href="https://github.com/Yrobot/mina-touch" target="_blank"><img src="https://github-readme-stats.vercel.app/api/pin?repo=mina-touch&amp;username=yrobot&amp;title_color=000000&amp;icon_color=000000&amp;text_color=000000&amp;border_color=F4F4F5&amp;bg_color=F4F4F5" alt="GithubCard"/></a></div><div class="card mb-15px md:mb-20px overflow-hidden"><a href="https://github.com/Yrobot/react-mobile-table" target="_blank"><img src="https://github-readme-stats.vercel.app/api/pin?repo=react-mobile-table&amp;username=yrobot&amp;title_color=000000&amp;icon_color=000000&amp;text_color=000000&amp;border_color=F4F4F5&amp;bg_color=F4F4F5" alt="GithubCard"/></a></div><div class="card mb-15px md:mb-20px overflow-hidden"><a href="https://github.com/Yrobot/mina-popups" target="_blank"><img src="https://github-readme-stats.vercel.app/api/pin?repo=mina-popups&amp;username=yrobot&amp;title_color=000000&amp;icon_color=000000&amp;text_color=000000&amp;border_color=F4F4F5&amp;bg_color=F4F4F5" alt="GithubCard"/></a></div></div></div></div><footer class="bg-accent-1"></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"pre":{"path":"_blogs/HTML\u0026CSS/css层叠上下文/README.md","url":"/blog/HTML\u0026CSS/css层叠上下文","title":"css层叠上下文","author":"yrobot","keywords":"css,层叠,上下文","createTime":1568649600000,"length":1371,"content":"\u003cp\u003e\u003cstrong\u003e本页目录：\u003c/strong\u003e\u003cbr\u003e\u003ca href=\"#question\"\u003e元素之间有重叠，浏览器要怎么展示呢\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#how\"\u003e怎么确定元素层叠关系\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#sxw\"\u003e层叠上下文\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#xdsx\"\u003e层叠顺序\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#doit\"\u003e实操一下看\u003c/a\u003e  \u003c/p\u003e\n\u003cp\u003e\u003ca id='question'\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"元素之间有重叠，浏览器要怎么展示呢\"\u003e元素之间有重叠，浏览器要怎么展示呢\u003c/h2\u003e\n\u003cp\u003e  当我们在编写html+css时，常常会遇到元素覆盖的问题，那解释器是怎么解释元素的覆盖的呢？  \u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e首先我们比确定的是，相邻的普通元素，都是后者覆盖前者的  \u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e  但是对于相对较远的元素，拥有其他css属性（例如z-index）的属性呢？  \u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eemmmm，z-index值越大就越靠上？？ \u003c/li\u003e\n\u003cli\u003enono，解释器不是这么简单粗暴的  \u003c/li\u003e\n\u003cli\u003e下面我们就来探讨一下 层叠上下文 对元素 层叠关系的影响   \u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ca id='how'\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"怎么确定元素层叠关系\"\u003e怎么确定元素层叠关系\u003c/h2\u003e\n\u003cp\u003e前端页面元素的覆盖关系由 \u003cstrong\u003e所属的层叠上下文\u003c/strong\u003e 和 \u003cstrong\u003e元素本身的层叠顺序\u003c/strong\u003e 决定  \u003c/p\u003e\n\u003cp\u003e先看层叠上下文，再看层叠顺序  \u003c/p\u003e\n\u003cp\u003e\u003ca id='sxw'\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"层叠上下文\"\u003e层叠上下文\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\u003cp\u003e层叠上下文是页面元素的一种属性，页面由普通元素组成，一些元素因为种种原因而带有了层叠上下文  \u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e产生层叠上下文的种种原因：  \u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e页面根元素html天生具有层叠上下文，称之为“根层叠上下文”\u003c/li\u003e\n\u003cli\u003e普通元素满足以下条件时具有层叠上下文：a.position值非static  b.z-index值非auto\u003c/li\u003e\n\u003cli\u003eCSS3中的新属性也可以产生层叠上下文\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e所有元素的层叠关系都是相对于 最近父层叠上下文元素 来说的   \u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003ca id='xdsx'\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"层叠顺序\"\u003e层叠顺序\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e层叠关系要在同一个层叠上下文中比较，两元素不在同一个层叠上下文则向上寻找，直到同一个层叠上下文，比较 \u003ccode\u003e最开始包含自己的层叠上下文（若有）|| 元素本身\u003c/code\u003e   \u003c/li\u003e\n\u003cli\u003e当将两者提升到同一个层叠上下文后，根据下图层叠顺序图来判断层叠关系 \u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e逻辑图如下：\u003cbr\u003e\u003cimg src=\"https://tva1.sinaimg.cn/large/006y8mN6ly1g72kli5irwj30hg08pmyl.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca id='doit'\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"实操一下看\"\u003e实操一下看\u003c/h2\u003e\n\u003cp\u003e\u003cimg src=\"https://tva1.sinaimg.cn/large/006y8mN6ly1g72kpdobofj30x70guacd.jpg\" alt=\"\"\u003e  \u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e建议判断层叠关系时，都在脑海中画一下上图虚拟DOM树  \u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e比较下以下几个元素的覆盖关系：\u003cbr\u003eB5-C3\u003cbr\u003eB2-B5\u003cbr\u003eC1-C2\u003cbr\u003eC3-B5\u003cbr\u003eC1-B1   \u003c/p\u003e\n\u003cp\u003e根据\u003ca href=\"#how\"\u003e怎么确定元素层叠关系\u003c/a\u003e，先看层叠上下文，再看层叠顺序  \u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e看层叠上下文  \u003cpre\u003e\u003ccode\u003eB5-C3 =\u0026gt; A4-A3   \nB2-B5 =\u0026gt; B2-A4   \nC1-C2 =\u0026gt; A1-B3   \nC3-B5 =\u0026gt; B4-B5   \nC1-B1 =\u0026gt; C1-B1   \n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003cli\u003e再根据\u003ca href=\"#xdsx\"\u003e层叠顺序\u003c/a\u003e的规则去判断元素的层叠关系吧！！！\u003c/li\u003e\n\u003c/ol\u003e\n"},"blog":{"path":"_blogs/计算机网络/计网体系结构.md","url":"/blog/计算机网络/计网体系结构","title":"计网体系结构 - OSI、TCP/IP、五层协议体系","author":"yrobot","keywords":"计网,OSI,TCP,IP,五层协议体系,体系结构","createTime":1538755200000,"length":4125,"content":"\u003cp\u003e\u003cstrong\u003e本页目录：\u003c/strong\u003e\u003cbr\u003e\u003ca href=\"#inall\"\u003e简而言之\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#osi\"\u003eOSI 的体系结构\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#tcpip\"\u003eTCP/IP 的结构体系\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#five\"\u003e五层体系结构\u003c/a\u003e  \u003c/p\u003e\n\u003cp\u003e\u003ca id='inall'\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"简而言之\"\u003e简而言之\u003c/h2\u003e\n\u003cp\u003e总的来说，计网结构体系分成三种：  \u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eOSI 的体系结构\u003c/li\u003e\n\u003cli\u003eTCP/IP 的结构体系\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#five\"\u003e五层体系结构\u003c/a\u003e [着重学习]\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003ccode\u003eOSI的体系结构\u003c/code\u003e 是由国际标准化组织ISO提出的一种标准框架，他有7层体系，但是由于 1.OSI缺乏商业驱动 2.协议较复杂，运行效率低   3.OSI层次划分不合理，功能出现重复。\b导致OSI止步于理论层面。  \u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eTCP/IP的结构体系\u003c/code\u003e 是由于OSI的复杂不实用，TCP/IP就应运而生了，他在ISO发表之前就出现了。TCP/IP只有4层体系，并且得到了市场的肯定。  \u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e五层体系结构\u003c/code\u003e 是因为OSI概念清除体系完整，而TCP/IP更具实用价值，所以我们学习的时候会学习较为折中的 五层协议的体系结构。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://ws3.sinaimg.cn/large/006tNbRwgy1fvygqapt6bj30g108yti3.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eOSI参考层编号\u003c/th\u003e\n\u003cth\u003e等效的OSI层\u003c/th\u003e\n\u003cth\u003e五层协议体系\u003c/th\u003e\n\u003cth\u003eTCP/IP协议体系\u003c/th\u003e\n\u003cth\u003eTCP/IP协议示例\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003e7、6、5\u003c/td\u003e\n\u003ctd\u003e应用、表示、会话\u003c/td\u003e\n\u003ctd\u003e应用\u003c/td\u003e\n\u003ctd\u003e应用层\u003c/td\u003e\n\u003ctd\u003eHTTP、HTTPS、NFS、NIS、DNS、LDAP、telnet、ftp、rlogin、rsh、rcp、RIP、RDISC、SNMP 等\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e4\u003c/td\u003e\n\u003ctd\u003e传输\u003c/td\u003e\n\u003ctd\u003e传输\u003c/td\u003e\n\u003ctd\u003e运输层\u003c/td\u003e\n\u003ctd\u003eTCP、UDP、SCTP\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e3\u003c/td\u003e\n\u003ctd\u003e网络\u003c/td\u003e\n\u003ctd\u003e网络\u003c/td\u003e\n\u003ctd\u003e网际层IP\u003c/td\u003e\n\u003ctd\u003eIPv4、IPv6、ARP、ICMP\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e2\u003c/td\u003e\n\u003ctd\u003e数据链路\u003c/td\u003e\n\u003ctd\u003e数据链路\u003c/td\u003e\n\u003ctd\u003e网络接口层\u003c/td\u003e\n\u003ctd\u003ePPP、IEEE 802.2\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003e物理\u003c/td\u003e\n\u003ctd\u003e物理网络\u003c/td\u003e\n\u003ctd\u003e网络接口层\u003c/td\u003e\n\u003ctd\u003e以太网 (IEEE 802.3)、令牌环、RS-232、FDDI 等等\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ca id='osi'\u003e\u003c/a\u003e\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003ch2 id=\"osi-的体系结构\"\u003eOSI 的体系结构\u003c/h2\u003e\n\u003cp\u003eOSI体系结构，意为开放式系统互联。\u003cbr\u003e国际标准组织（国际标准化组织）制定了OSI模型。这个模型把网络通信的工作分为7层\u003cbr\u003e分别是 \u003ccode\u003e物理层, 数据链路层, 网络层, 传输层, 会话层, 表示层 和 应用层\u003c/code\u003e。  \u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eOSI体系从上到下解析：\u003c/strong\u003e  \u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cp\u003e应用层（Application Layer）提供为应用软件而设的接口，以设置与另一应用软件之间的通信。例如: HTTP，HTTPS，FTP，TELNET，SSH，SMTP，POP3等。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e表达层（Presentation Layer）把数据转换为能与接收者的系统格式兼容并适合传输的格式。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e会话层（Session Layer）负责在数据传输中设置和维护计算机网络中两台计算机之间的通信连接。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e传输层（Transport Layer）把传输表头（TH）加至数据以形成数据包。传输表头包含了所使用的协议等发送信息。例如:传输控制协议（TCP）等。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e网络层（Network Layer）决定数据的路径选择和转寄，将网络表头（NH）加至数据包，以形成分组。网络表头包含了网络数据。例如:互联网协议（IP）等。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e数据链路层（Data Link Layer）负责网络寻址、错误侦测和改错。当表头和表尾被加至数据包时，会形成帧。数据链表头（DLH）是包含了物理地址和错误侦测及改错的方法。数据链表尾（DLT）是一串指示数据包末端的字符串。例如以太网、无线局域网（Wi-Fi）和通用分组无线服务（GPRS）等。\u003cbr\u003e分为两个子层：逻辑链路控制（logic link control，LLC）子层和介质访问控制（media access control，MAC）子层。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e物理层（Physical Layer）在局部局域网上传送数据帧（data frame），它负责管理计算机通信设备和网络媒体之间的互通。包括了针脚、电压、线缆规范、集线器、中继器、网卡、主机适配器等。\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003ca id='tcpip'\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"tcpip-的结构体系\"\u003eTCP/IP 的结构体系\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003e1. 本机内TCP/IP体系结构展示：\u003c/strong\u003e\u003cbr\u003e\u003cimg src=\"https://ws4.sinaimg.cn/large/006tNbRwgy1fvzspp8fp6j30d9073n1n.jpg\" alt=\"\"\u003e  \u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e2. 网络间TCP/IP体系结构展示：\u003c/strong\u003e\u003cbr\u003e\u003cimg src=\"https://ws1.sinaimg.cn/large/006tNbRwgy1fvytqvroucj30fu09045j.jpg\" alt=\"\"\u003e  \u003c/p\u003e\n\u003cp\u003e\u003ca id='from5'\u003e\u003c/a\u003e  \u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e3. TCP/IP 体系\b从上到下解析\u003c/strong\u003e  \u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003e应用层：\u003c/strong\u003e\n应用层是体系结构中的最高层，它直接为用户的应用程序提供服务，在因特网中应用层的协议很多，如支持万维网应用的http协议，支持电邮的smtp协议，支持文件传输的ftp协议等等。\u003cbr\u003e我们将应用层交互的数据单元称为 __报文__。 \u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003e运输层：\u003c/strong\u003e 它为两个主机中的进程间提供通用的传输服务。主要有复用(向下传)和分用(向上传)两个功能。\u003cbr\u003e 运输层主要使用以下两种协议：TCP和UDP   \u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eTCP：_Transmission Contol Protocol_，传输控制协议，面向连接的，数据传输的单位是报文段，能够提供可靠地交付。  \u003c/li\u003e\n\u003cli\u003eUDP：_User Datagram Protocol_，用户数据报协议，无连接的，数据传输的单位是用户数据报，不保证提供可靠地交付。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003e网络层：\u003c/strong\u003e\n 负责为分组交换网上的不同主机提供通信服务。\u003cbr\u003e (作用1)在发送数据时，网络层把运输层产生的报文段或用户数据报封装成分组或包进行传送。\u003cbr\u003e 在TCP/IP体系中，由于网络层使用IP协议，因此分组也叫做IP数据报，简称数据报。\u003cbr\u003e (作用2)网络层的另一个任务就是要选择合适的路由，\u003cbr\u003e 使源主机运输层所传下来的分组，能够通过网络中的路由器找到目的主机。  \u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003e网络接口层：\u003c/strong\u003e 对于TCP/IP结构体系，的这一层主要包含 五层协议 的数据链路层和物理层    \u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e数据链路层：\u003cbr\u003e链路层将网络层交下来的IP数据报组装成帧，在两个相邻结点之间的链路上透明地传送帧中的数据。控制端在接收数据时，控制信息使接收端能够知道一个帧从哪个比特开始和到哪个比特结束。这样，数据链路层在收到一个帧后，就可从中提取出数据部分，上交给网络层。控制信息还使得接收端能够检测到所收到的帧中有无差错。如果发现有差错，数据链路层就简单地丢弃这个出错的帧，以免传下去白白浪费网络资源。如果需要改正错误，就由运输层的TCP协议来完成。(数据信息的确认交给更高层的网络层或者应用层实现)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e物理层：在物理层上所传数据的单位是比特。物理层的任务就是透明地传送比特流。\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003ca id='five'\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"五层体系结构\"\u003e五层体系结构\u003c/h2\u003e\n\u003cp\u003e五层体系结构主要是将TCP/IP体系拆分成5层，便于学习：  \u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e__应用层__：应用层定义的是 应用间通信和交互的规则，如HTTP、FTP等\u003c/li\u003e\n\u003cli\u003e__运输层__：它为两个主机中的进程间提供通用的传输服务。主要有复用(向下传)和分用(向上传)两个功能。运输方式分为TCP、UDP两种协议\u003c/li\u003e\n\u003cli\u003e__网络层__：为运输层的数据包选择合适的路由协议(TCP/IP中用的是IP协议)，地址解析 和 路由 是网络层的重要目的。\u003c/li\u003e\n\u003cli\u003e__数据链路层__：数据链路层在不可靠的物理介质上提供可靠的传输。作用包括：物理地址寻址、数据的成帧、流量控制、数据的检错、重发等。\u003c/li\u003e\n\u003cli\u003e__物理层__：物理层主要负责 数据 和 物理信号 之间的互相转换。(比如0和1转换为电信号分别用几伏表示传输)\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e具体每层的内容参看\u003ca href=\"#from5\"\u003eTCP/IP 体系\b从上到下解析\u003c/a\u003e  \u003c/p\u003e\n\u003cp\u003e五层体系结构的数据传输 \u003cstrong\u003e图解\u003c/strong\u003e ：\u003cbr\u003e\u003cimg src=\"https://ws3.sinaimg.cn/large/006tNbRwgy1fw0ndnh4hzj30rs0d4qiu.jpg\" alt=\"\"\u003e\u003c/p\u003e\n"},"next":{"path":"_blogs/微信小程序/小程序的分享与传参.md","url":"/blog/微信小程序/小程序的分享与传参","title":"小程序的分享与传参","author":"yrobot","keywords":"小程序,传参,分享","createTime":1538236800000,"length":5284,"content":"\u003cp\u003e\u003cstrong\u003e本页目录：\u003c/strong\u003e\u003cbr\u003e\u003ca href=\"#before\"\u003e事先说明\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#share\"\u003e分享方法概括\u003c/a\u003e  \u003c/p\u003e\n\u003cp\u003e分享传参\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#url\"\u003e利用URL参数\u003c/a\u003e  \u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#qrcode\"\u003e二维码传参\u003c/a\u003e  \u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#st\"\u003eshareTicket\u003c/a\u003e  \u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#cb\"\u003e剪切板传参\u003c/a\u003e  \u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ca href=\"#note\"\u003e分享的注意点\u003c/a\u003e  \u003c/p\u003e\n\u003cp\u003e\u003ca id='before'\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"事先说明\"\u003e事先说明\u003c/h2\u003e\n\u003cp\u003e首先要说的就是\u003cbr\u003e微信仗着自己的生态圈日益完善，随随便便就可以废弃或者改动API\u003ccode\u003e(比如这次的分享回调函数)\u003c/code\u003e\u003cbr\u003e所以本文只能做到说，对于目前\u003ccode\u003e2018年09月30日\u003c/code\u003e这个时间结点，我所做的总结是没有问题的   \u003c/p\u003e\n\u003cp\u003e再说一下做本次总结的初衷，或者是出发点  \u003c/p\u003e\n\u003cp\u003e最近要负责一个信用卡的小程序项目\u003cbr\u003e我主要负责的就是项目的前端开发\u003cbr\u003e那么一系列关于分享的问题就来了  \u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e什么这个页面能不能生成链接放群里啊\u003c/li\u003e\n\u003cli\u003e小程序能不能分享到朋友圈啊\u003c/li\u003e\n\u003cli\u003e分享对接到个人，进而引入任务机制啊\u003c/li\u003e\n\u003cli\u003e能不能查看每个人发展了几个新用户啊\u003c/li\u003e\n\u003cli\u003e朋友圈分享加入参数怎么实现啊\u003c/li\u003e\n\u003cli\u003e巴拉巴拉\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e呼~  \u003c/p\u003e\n\u003cp\u003e索性做一次比较系统的总结吧\u003cbr\u003e看你们谁敢再提一些xx的需求  \u003c/p\u003e\n\u003cp\u003e\u003ca id='share'\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"分享方法概括\"\u003e分享方法概括\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e利用page生命周期onShareAppMessage()\u003c/li\u003e\n\u003cli\u003e基于\b二维码图片进行分享\u003c/li\u003e\n\u003cli\u003e通过剪切板分享   \u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"1-利用page生命周期onshareappmessage\"\u003e1. 利用page生命周期onShareAppMessage()\u003c/h3\u003e\n\u003cp\u003e只有设置了onShareAppMessage()函数\u003cbr\u003e点击小程序右上角才会有分享选项\u003cbr\u003ebutton方式的分享才会成功  \u003c/p\u003e\n\u003cp\u003e具体API使用参考\u003ca href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page.html#%E9%A1%B5%E9%9D%A2%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0\"\u003e官网-页面事件处理函数\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e优点：\u003c/strong\u003e\u003cbr\u003e这个方法好的地方就是可以直接分享给用户和群\u003cbr\u003e用户点击链接直接跳转小程序\u003cbr\u003e非常方便，转化率也高  \u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e缺点：\u003c/strong\u003e\u003cbr\u003e不支持以链接形式分享到朋友圈  \u003c/p\u003e\n\u003ch3 id=\"2-\b基于\b二维码图片进行分享\"\u003e2. \b基于\b二维码图片进行分享\u003c/h3\u003e\n\u003cp\u003e生成小程序二维码需要获取access_token\u003cbr\u003e然后利用\u003ca href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/qr-code.html\"\u003e官方的接口\u003c/a\u003e去获取二维码\u003cbr\u003e接口返回数据为二维码的二进制数据  \u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e需要注意的是：\u003c/strong\u003e\u003cbr\u003e官方的接口有3个\u003cbr\u003e但是1、3的接口生成个数总和不得超过100000，但参数长度够长\u003cbr\u003e2接口不限制总个数，生成频率也很大，但是2号接口的参数整体不得多于32个可见字符\u003cbr\u003e这需要开发的取舍，或者进行适当的转换了  \u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e优点：\u003c/strong\u003e\u003cbr\u003e方法各种场景通用，可以对用户、对朋友圈、甚至支持以其他媒体介质传播  \u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e缺点：\u003c/strong\u003e\u003cbr\u003e方法操作复杂，转换率比较低\u003cbr\u003e对于老年用户。可能不是很智能\u003cbr\u003e参数可能还需要压缩  \u003c/p\u003e\n\u003ch3 id=\"3-通过剪切板分享\"\u003e3. 通过剪切板分享\u003c/h3\u003e\n\u003cp\u003e这个方法适用的场景很单一\u003cbr\u003e主要是\b各方都在用小程序的情况下\u003cbr\u003e不是用来推广小程序的\u003cbr\u003e而是用来分享具体内容的（前提是都已经在用小程序了） \u003c/p\u003e\n\u003cp\u003e目前淘宝、支付宝这种方式的分享很多  \u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e需要注意的是：\u003c/strong\u003e\n由于是明文分享，需要做好防修改操作\u003cbr\u003e最好就是以签名的方式进行判断  \u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e优点：\u003c/strong\u003e\u003cbr\u003e分享途径不受限制\u003cbr\u003e分享方法也很简单  \u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e缺点：\u003c/strong\u003e\u003cbr\u003e不适用小程序的推广，单纯的内部分享\u003cbr\u003e打开小程序后才能被监听  \u003c/p\u003e\n\u003cp\u003e\u003ca id='url'\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"利用url参数\"\u003e利用URL参数\u003c/h2\u003e\n\u003ch4 id=\"方法简述\"\u003e方法简述\u003c/h4\u003e\n\u003cp\u003e就是前段最朴素的传参，在url后添加?name=value的形式，然后利用路由或者小程序自带的方法读取参数   \u003c/p\u003e\n\u003ch4 id=\"方法步骤\"\u003e方法步骤\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003e在页面onShareAppMessage()配置返回的url，以path?name=value的形式  \u003c/li\u003e\n\u003cli\u003e获取参数：  \u003col\u003e\n\u003cli\u003e在Page的onLoad生命周期的参数 \u003ccode\u003eoption.参数名\u003c/code\u003e 获取参数值\u003c/li\u003e\n\u003cli\u003e还可以在APP的onLaunch生命周期的参数 \u003ccode\u003eoptions.query.参数名\u003c/code\u003e 获取\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch4 id=\"注意点\"\u003e注意点\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e关于参数的问题，onShareAppMessage()没有指明是否可以在tab页面的url带参数，但是wx路由API指明只能在跳转非tab页时带参数 。  \u003c/li\u003e\n\u003cli\u003e必须触发Page的onLoad或者APP的onLaunch才获取的到参数  \u003ch4 id=\"测试结果：\"\u003e测试结果：\u003c/h4\u003e\n直接打开：\n\u003cimg src=\"https://ws4.sinaimg.cn/large/006tNc79gy1fvrmzyjpbkj30v80jignm.jpg\" alt=\"\"\u003e\n从分享链接打开：\n\u003cimg src=\"https://ws3.sinaimg.cn/large/006tNc79gy1fvrn0kxyohj30ve0m0tax.jpg\" alt=\"\"\u003e\n\u003ca id='qrcode'\u003e\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"二维码传参\"\u003e二维码传参\u003c/h2\u003e\n\u003ch4 id=\"方法简述-1\"\u003e方法简述\u003c/h4\u003e\n\u003cp\u003e利用小程序生成二维码的API生成二维码，让用户直接分享二维码  \u003c/p\u003e\n\u003ch4 id=\"方法步骤-1\"\u003e方法步骤\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003e利用appID和appSECRET获取access_token\u003c/li\u003e\n\u003cli\u003e利用access_token作为参数请求二维码API\u003c/li\u003e\n\u003cli\u003e接口返回二维码的二进制数据，处理成url\u003c/li\u003e\n\u003cli\u003e利用wx接口下载url并保存\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch4 id=\"注意点-1\"\u003e注意点\u003c/h4\u003e\n\u003cp\u003e官方二维码生成接口有3种方法，具体参考\u003ca href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/qr-code.html\"\u003e官方API\u003c/a\u003e\u003cbr\u003e三种方式的参数和url，data格式都不一样，具体可以参考\u003ca href=\"https://www.jianshu.com/p/441882c67b6a\"\u003e博客链接\u003c/a\u003e   \u003c/p\u003e\n\u003cp\u003e注意1、3一共只能生成10000个二维码，2的参数长度不能那个超过32个字符\u003cbr\u003e接口返回的图片二进制，最好是在服务端储存然后返回链接给前端。\u003cbr\u003e\u003ca id='st'\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"shareticket\"\u003eshareTicket\u003c/h2\u003e\n\u003ch4 id=\"方法简述-2\"\u003e方法简述\u003c/h4\u003e\n\u003cp\u003eshareTicket的作用是用来换取 群的openID  \u003c/p\u003e\n\u003ch4 id=\"方法步骤-2\"\u003e方法步骤\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003e在showSHareMenu()或者updateShareMenu()中设置shareTicket为true\u003c/li\u003e\n\u003cli\u003e将小程序分享到群中\u003c/li\u003e\n\u003cli\u003e有用户打开此链接后,即可在App.onLaunch 或 App.onShow 获取到一个 shareTicket\u003c/li\u003e\n\u003cli\u003e利用wx.getShareInfo将shareTicket转化成加密数据\u003c/li\u003e\n\u003cli\u003e加密数据解密后获得 群openID \u003c/li\u003e\n\u003c/ol\u003e\n\u003ch4 id=\"注意点-2\"\u003e注意点\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003e18年10月10号，微信关闭分享回调函数，所以无法再用户分享会后立刻获得shareTicket\u003c/li\u003e\n\u003cli\u003e使用App.onLaunch获取要注意，App.onLaunch只在小程序初始化时触发，即当已经打开小程序，再去群里点击链接，是不会触发App.onLaunch的。推荐使用App.onShow\u003ch4 id=\"代码演示\"\u003e代码演示\u003c/h4\u003e\ndemo7.js:\u003cpre\u003e\u003ccode\u003eonShareAppMessage: function (res) {\n return {\n     title: \u0026#39;Yrobot test share\u0026#39;,\n     path: \u0026#39;pages/demo7/index?shareID=Yrobot7\u0026#39;\n }\n},\nonShow: function () {\n // setTimeout(() =\u0026gt; {\n //     wx.redirectTo({\n //         url: \u0026#39;../demo5/index\u0026#39;\n //     }) \n // }, 6000);\n wx.showShareMenu({\n     withShareTicket: true,\n });\n},\n\u003c/code\u003e\u003c/pre\u003e\nApp.js:\u003cpre\u003e\u003ccode\u003eonShow: options =\u0026gt; {\n console.log(\u0026#39;App.onShow\u0026#39;);\n console.log(\u0026#39;shareID: \u0026#39; + options.query.shareID);\n wx.getShareInfo({\n   shareTicket: options.shareTicket,\n   success: res =\u0026gt; {\n     console.log(\u0026#39;wx.getShareInfo:success:\u0026#39;);\n     console.log(res);\n   },\n   fail: res =\u0026gt; {\n     console.log(\u0026#39;wx.getShareInfo:fail\u0026#39;);\n     console.log(res);\n   }\n });\n},\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"效果展示\"\u003e效果展示\u003c/h4\u003e\n\u003cimg src=\"https://ws2.sinaimg.cn/large/006tNc79gy1fvro07yrz1j30ws0m0wsy.jpg\" alt=\"\"\u003e\n\u003ca id='cb'\u003e\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"剪切板传参\"\u003e剪切板传参\u003c/h2\u003e\n\u003ch4 id=\"方法简述-3\"\u003e方法简述\u003c/h4\u003e\n\u003cp\u003e利用剪切板监听的方式，获取页面和参数\u003cbr\u003e功能类似于淘宝、支付宝的分享   \u003c/p\u003e\n\u003ch4 id=\"方法内容\"\u003e方法内容\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e利用wx.setClipboardData设置剪切板内容  \u003c/li\u003e\n\u003cli\u003e利用wx.getClipboardData获取剪切内容  \u003c/li\u003e\n\u003cli\u003e监听到剪切板时当前小程序的分享字符串时，进行解析、跳转  \u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"注意点-3\"\u003e注意点\u003c/h4\u003e\n\u003cp\u003e注意传参的话最好进行加密混淆、否则明码容易被用户手动替换\u003cbr\u003e最好就是对整体进行签名，签名认证不一致(用户修改过)就不进行解析   \u003c/p\u003e\n\u003ch4 id=\"效果展示：\"\u003e效果展示：\u003c/h4\u003e\n\u003cp\u003e初始进入：\u003cbr\u003e    \u003cimg src=\"https://ws4.sinaimg.cn/large/006tNc79gy1fvrkc3incyj30gg0ncwfg.jpg\" alt=\"\"\u003e\u003cbr\u003e复制指令后进入：\u003cbr\u003e    \u003cimg src=\"https://ws4.sinaimg.cn/large/006tNc79gy1fvrkbv5lqlj30gm0nc3zb.jpg\" alt=\"\"\u003e   \u003c/p\u003e\n\u003cp\u003e\u003ca id='note'\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"分享的注意点\"\u003e分享的注意点\u003c/h2\u003e\n\u003cp\u003e由于7月5日微信更新API，减少“强制分享至不同群”等滥用分享能力，将不再支持onShareAppMessage()中获取分享状态(即那三个回调函数)，所以也无法在分享后立刻获得群id，而改为用户打开后利用shareTicket换取群id   \u003c/p\u003e\n\u003cp\u003e具体参考微信公众平台公告：10月10日起新提交发布的版本，不再支持分享回调参数 success 、fail 、complete\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://mp.weixin.qq.com/s?__biz=MjM5NDAwMTA2MA==\u0026amp;mid=2695730124\u0026amp;idx=1\u0026amp;sn=666a448b047d657350de7684798f48d3\u0026amp;chksm=83d74a07b4a0c311569a748f4d11a5ebcce3ba8f6bd5a4b3183a4fea0b3442634a1c71d3cdd0\u0026amp;scene=21#wechat_redirect\"\u003e微信公共平台 - 分享功能调整及小程序组件更新\u003c/a\u003e[时间不准确]\u003cbr\u003e\u003ca href=\"https://mp.weixin.qq.com/cgi-bin/announce?action=getannouncement\u0026amp;announce_id=11526372695t90Dn\u0026amp;version=\u0026amp;lang=zh_CN\"\u003e微信公共平台 - 分享功能调整\u003c/a\u003e[时间不准确]\u003cbr\u003e\u003ca href=\"https://developers.weixin.qq.com/community/develop/doc/0000447a5b431807af57249a551408?highLine=%25E5%2588%2586%25E4%25BA%25AB%25E5%259B%259E%25E8%25B0%2583%25E6%2588%2590%25E5%258A%259F\"\u003e微信开放社区 - “分享监听”能力调整\u003c/a\u003e[时间准确]\u003c/p\u003e\n"}},"__N_SSG":true},"page":"/blog/[...path]","query":{"path":["计算机网络","计网体系结构"]},"buildId":"s54B_pIxI2u11BI5Vr-0V","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-8683bd742a84c1edd48c.js"></script><script src="/_next/static/chunks/webpack-353d88844ab2a1fc4db5.js" async=""></script><script src="/_next/static/chunks/framework-d3984ef788efc6bd8157.js" async=""></script><script src="/_next/static/chunks/597-9d03ea954e499bbdd7af.js" async=""></script><script src="/_next/static/chunks/778-1467ee0b708f5cd375c0.js" async=""></script><script src="/_next/static/chunks/main-9ca82ec4d4aca520c43d.js" async=""></script><script src="/_next/static/chunks/pages/_app-d1fff168fcebfddb9829.js" async=""></script><script src="/_next/static/chunks/525-eaa095b223f3548a6266.js" async=""></script><script src="/_next/static/chunks/644-1b1b80a38bd95016983b.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5B...path%5D-3b49df77748c00cbb7fd.js" async=""></script><script src="/_next/static/s54B_pIxI2u11BI5Vr-0V/_buildManifest.js" async=""></script><script src="/_next/static/s54B_pIxI2u11BI5Vr-0V/_ssgManifest.js" async=""></script></body></html>